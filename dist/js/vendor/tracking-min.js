!function(a,b){a.tracking=a.tracking||{},tracking.inherits=function(a,b){function c(){}c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.base=function(a,c){var d=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,d)}},tracking.initUserMedia_=function(b,c){a.navigator.getUserMedia({video:!0,audio:!(!c||!c.audio)},function(c){try{b.src=a.URL.createObjectURL(c)}catch(d){b.src=c}},function(){throw Error("Cannot capture user camera.")})},tracking.isNode=function(a){return a.nodeType||this.isWindow(a)},tracking.isWindow=function(a){return!!(a&&a.alert&&a.document)},tracking.one=function(a,b){return this.isNode(a)?a:(b||document).querySelector(a)},tracking.track=function(a,b,c){if(a=tracking.one(a),!a)throw new Error("Element not found, try a different element or selector.");if(!b)throw new Error("Tracker not specified, try `tracking.track(element, new tracking.FaceTracker())`.");switch(a.nodeName.toLowerCase()){case"canvas":return this.trackCanvas_(a,b,c);case"img":return this.trackImg_(a,b,c);case"video":return c&&c.camera&&this.initUserMedia_(a,c),this.trackVideo_(a,b,c);default:throw new Error("Element not supported, try in a canvas, img, or video.")}},tracking.trackCanvas_=function(a,b){var c=this,d=new tracking.TrackerTask(b);return d.on("run",function(){c.trackCanvasInternal_(a,b)}),d.run()},tracking.trackCanvasInternal_=function(a,b){var c=a.width,d=a.height,e=a.getContext("2d"),f=e.getImageData(0,0,c,d);b.track(f.data,c,d)},tracking.trackImg_=function(a,b){var c=a.width,d=a.height,e=document.createElement("canvas");e.width=c,e.height=d;var f=new tracking.TrackerTask(b);return f.on("run",function(){tracking.Canvas.loadImage(e,a.src,0,0,c,d,function(){tracking.trackCanvasInternal_(e,b)})}),f.run()},tracking.trackVideo_=function(b,c){var d,e,f=document.createElement("canvas"),g=f.getContext("2d"),h=function(){d=b.offsetWidth,e=b.offsetHeight,f.width=d,f.height=e};h(),b.addEventListener("resize",h);var i,j=function(){i=a.requestAnimationFrame(function(){if(b.readyState===b.HAVE_ENOUGH_DATA){try{g.drawImage(b,0,0,d,e)}catch(a){}tracking.trackCanvasInternal_(f,c)}j()})},k=new tracking.TrackerTask(c);return k.on("stop",function(){a.cancelAnimationFrame(i)}),k.on("run",function(){j()}),k.run()},a.URL||(a.URL=a.URL||a.webkitURL||a.msURL||a.oURL),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}(window),function(){tracking.EventEmitter=function(){},tracking.EventEmitter.prototype.events_=null,tracking.EventEmitter.prototype.addListener=function(a,b){if("function"!=typeof b)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",a,b),this.events_[a]||(this.events_[a]=[]),this.events_[a].push(b),this},tracking.EventEmitter.prototype.listeners=function(a){return this.events_&&this.events_[a]},tracking.EventEmitter.prototype.emit=function(a){var b=this.listeners(a);if(b){for(var c=Array.prototype.slice.call(arguments,1),d=0;d<b.length;d++)b[d]&&b[d].apply(this,c);return!0}return!1},tracking.EventEmitter.prototype.on=tracking.EventEmitter.prototype.addListener,tracking.EventEmitter.prototype.once=function(a,b){var c=this;c.on(a,function d(){c.removeListener(a,d),b.apply(this,arguments)})},tracking.EventEmitter.prototype.removeAllListeners=function(a){return this.events_?(a?delete this.events_[a]:delete this.events_,this):this},tracking.EventEmitter.prototype.removeListener=function(a,b){if("function"!=typeof b)throw new TypeError("Listener must be a function");if(!this.events_)return this;var c=this.listeners(a);if(Array.isArray(c)){var d=c.indexOf(b);if(0>d)return this;c.splice(d,1)}return this},tracking.EventEmitter.prototype.setMaxListeners=function(){throw new Error("Not implemented")}}(),function(){tracking.Canvas={},tracking.Canvas.loadImage=function(a,b,c,d,e,f,g){var h=this,i=new window.Image;i.crossOrigin="*",i.onload=function(){var b=a.getContext("2d");a.width=e,a.height=f,b.drawImage(i,c,d,e,f),g&&g.call(h),i=null},i.src=b}}(),function(){tracking.DisjointSet=function(a){if(void 0===a)throw new Error("DisjointSet length not specified.");this.length=a,this.parent=new Uint32Array(a);for(var b=0;a>b;b++)this.parent[b]=b},tracking.DisjointSet.prototype.length=null,tracking.DisjointSet.prototype.parent=null,tracking.DisjointSet.prototype.find=function(a){return this.parent[a]===a?a:this.parent[a]=this.find(this.parent[a])},tracking.DisjointSet.prototype.union=function(a,b){var c=this.find(a),d=this.find(b);this.parent[c]=d}}(),function(){tracking.Image={},tracking.Image.blur=function(a,b,c,d){if(d=Math.abs(d),1>=d)throw new Error("Diameter should be greater than 1.");for(var e=d/2,f=Math.ceil(d)+(1-Math.ceil(d)%2),g=new Float32Array(f),h=(e+.5)/3,i=h*h,j=1/Math.sqrt(2*Math.PI*i),k=-1/(2*h*h),l=0,m=Math.floor(f/2),n=0;f>n;n++){var o=n-m,p=j*Math.exp(o*o*k);g[n]=p,l+=p}for(var q=0;q<g.length;q++)g[q]/=l;return this.separableConvolve(a,b,c,g,g,!1)},tracking.Image.computeIntegralImage=function(a,b,c,d,e,f,g){if(arguments.length<4)throw new Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");var h;g&&(h=tracking.Image.sobel(a,b,c));for(var i=0;c>i;i++)for(var j=0;b>j;j++){var k=i*b*4+4*j,l=~~(.299*a[k]+.587*a[k+1]+.114*a[k+2]);if(d&&this.computePixelValueSAT_(d,b,i,j,l),e&&this.computePixelValueSAT_(e,b,i,j,l*l),f){var m=k-4*b,n=~~(.299*a[m]+.587*a[m+1]+.114*a[m+2]);this.computePixelValueRSAT_(f,b,i,j,l,n||0)}g&&this.computePixelValueSAT_(g,b,i,j,h[k])}},tracking.Image.computePixelValueRSAT_=function(a,b,c,d,e,f){var g=c*b+d;a[g]=(a[g-b-1]||0)+(a[g-b+1]||0)-(a[g-b-b]||0)+e+f},tracking.Image.computePixelValueSAT_=function(a,b,c,d,e){var f=c*b+d;a[f]=(a[f-b]||0)+(a[f-1]||0)+e-(a[f-b-1]||0)},tracking.Image.grayscale=function(a,b,c,d){for(var e=new Uint8ClampedArray(d?a.length:a.length>>2),f=0,g=0,h=0;c>h;h++)for(var i=0;b>i;i++){var j=.299*a[g]+.587*a[g+1]+.114*a[g+2];e[f++]=j,d&&(e[f++]=j,e[f++]=j,e[f++]=a[g+3]),g+=4}return e},tracking.Image.horizontalConvolve=function(a,b,c,d,e){for(var f=d.length,g=Math.floor(f/2),h=new Float32Array(b*c*4),i=e?1:0,j=0;c>j;j++)for(var k=0;b>k;k++){for(var l=j,m=k,n=4*(j*b+k),o=0,p=0,q=0,r=0,s=0;f>s;s++){var t=l,u=Math.min(b-1,Math.max(0,m+s-g)),v=4*(t*b+u),w=d[s];o+=a[v]*w,p+=a[v+1]*w,q+=a[v+2]*w,r+=a[v+3]*w}h[n]=o,h[n+1]=p,h[n+2]=q,h[n+3]=r+i*(255-r)}return h},tracking.Image.verticalConvolve=function(a,b,c,d,e){for(var f=d.length,g=Math.floor(f/2),h=new Float32Array(b*c*4),i=e?1:0,j=0;c>j;j++)for(var k=0;b>k;k++){for(var l=j,m=k,n=4*(j*b+k),o=0,p=0,q=0,r=0,s=0;f>s;s++){var t=Math.min(c-1,Math.max(0,l+s-g)),u=m,v=4*(t*b+u),w=d[s];o+=a[v]*w,p+=a[v+1]*w,q+=a[v+2]*w,r+=a[v+3]*w}h[n]=o,h[n+1]=p,h[n+2]=q,h[n+3]=r+i*(255-r)}return h},tracking.Image.separableConvolve=function(a,b,c,d,e,f){var g=this.verticalConvolve(a,b,c,e,f);return this.horizontalConvolve(g,b,c,d,f)},tracking.Image.sobel=function(a,b,c){a=this.grayscale(a,b,c,!0);for(var d=new Float32Array(b*c*4),e=new Float32Array([-1,0,1]),f=new Float32Array([1,2,1]),g=this.separableConvolve(a,b,c,e,f),h=this.separableConvolve(a,b,c,f,e),i=0;i<d.length;i+=4){var j=g[i],k=h[i],l=Math.sqrt(k*k+j*j);d[i]=l,d[i+1]=l,d[i+2]=l,d[i+3]=255}return d}}(),function(){tracking.ViolaJones={},tracking.ViolaJones.REGIONS_OVERLAP=.5,tracking.ViolaJones.classifiers={},tracking.ViolaJones.detect=function(a,b,c,d,e,f,g,h){var i,j=0,k=[],l=new Int32Array(b*c),m=new Int32Array(b*c),n=new Int32Array(b*c);g>0&&(i=new Int32Array(b*c)),tracking.Image.computeIntegralImage(a,b,c,l,m,n,i);for(var o=h[0],p=h[1],q=d*e,r=q*o|0,s=q*p|0;b>r&&c>s;){for(var t=q*f+.5|0,u=0;c-s>u;u+=t)for(var v=0;b-r>v;v+=t)g>0&&this.isTriviallyExcluded(g,i,u,v,b,r,s)||this.evalStages_(h,l,m,n,u,v,b,r,s,q)&&(k[j++]={width:r,height:s,x:v,y:u});q*=e,r=q*o|0,s=q*p|0}return this.mergeRectangles_(k)},tracking.ViolaJones.isTriviallyExcluded=function(a,b,c,d,e,f,g){var h=c*e+d,i=h+f,j=h+g*e,k=j+f,l=(b[h]-b[i]-b[j]+b[k])/(f*g*255);return a>l?!0:!1},tracking.ViolaJones.evalStages_=function(a,b,c,d,e,f,g,h,i,j){var k=1/(h*i),l=e*g+f,m=l+h,n=l+i*g,o=n+h,p=(b[l]-b[m]-b[n]+b[o])*k,q=(c[l]-c[m]-c[n]+c[o])*k-p*p,r=1;q>0&&(r=Math.sqrt(q));for(var s=a.length,t=2;s>t;){for(var u=0,v=a[t++],w=a[t++];w--;){for(var x=0,y=a[t++],z=a[t++],A=0;z>A;A++){var B,C,D,E,F=f+a[t++]*j+.5|0,G=e+a[t++]*j+.5|0,H=a[t++]*j+.5|0,I=a[t++]*j+.5|0,J=a[t++];y?(B=F-I+H+(G+H+I-1)*g,C=F+(G-1)*g,D=F-I+(G+I-1)*g,E=F+H+(G+H-1)*g,x+=(d[B]+d[C]-d[D]-d[E])*J):(B=G*g+F,C=B+H,D=B+I*g,E=D+H,x+=(b[B]-b[C]-b[D]+b[E])*J)}var K=a[t++],L=a[t++],M=a[t++];u+=K*r>x*k?L:M}if(v>u)return!1}return!0},tracking.ViolaJones.mergeRectangles_=function(a){for(var b=new tracking.DisjointSet(a.length),c=0;c<a.length;c++)for(var d=a[c],e=0;e<a.length;e++){var f=a[e];if(tracking.Math.intersectRect(d.x,d.y,d.x+d.width,d.y+d.height,f.x,f.y,f.x+f.width,f.y+f.height)){var g=Math.max(d.x,f.x),h=Math.max(d.y,f.y),i=Math.min(d.x+d.width,f.x+f.width),j=Math.min(d.y+d.height,f.y+f.height),k=(g-i)*(h-j),l=d.width*d.height,m=f.width*f.height;k/(l*(l/m))>=this.REGIONS_OVERLAP&&k/(m*(l/m))>=this.REGIONS_OVERLAP&&b.union(c,e)}}for(var n={},o=0;o<b.length;o++){var p=b.find(o);n[p]?(n[p].total++,n[p].width+=a[o].width,n[p].height+=a[o].height,n[p].x+=a[o].x,n[p].y+=a[o].y):n[p]={total:1,width:a[o].width,height:a[o].height,x:a[o].x,y:a[o].y}}var q=[];return Object.keys(n).forEach(function(a){var b=n[a];q.push({total:b.total,width:b.width/b.total+.5|0,height:b.height/b.total+.5|0,x:b.x/b.total+.5|0,y:b.y/b.total+.5|0})}),q}}(),function(){tracking.Brief={},tracking.Brief.N=512,tracking.Brief.randomImageOffsets_={},tracking.Brief.randomWindowOffsets_=null,tracking.Brief.getDescriptors=function(a,b,c){for(var d=new Int32Array((c.length>>1)*(this.N>>5)),e=0,f=this.getRandomOffsets_(b),g=0,h=0;h<c.length;h+=2)for(var i=b*c[h+1]+c[h],j=0,k=0,l=this.N;l>k;k++)a[f[j++]+i]<a[f[j++]+i]&&(e|=1<<(31&k)),k+1&31||(d[g++]=e,e=0);return d},tracking.Brief.match=function(a,b,c,d){for(var e=a.length>>1,f=c.length>>1,g=new Array(e),h=0;e>h;h++){for(var i=1/0,j=0,k=0;f>k;k++){for(var l=0,m=0,n=this.N>>5;n>m;m++)l+=tracking.Math.hammingWeight(b[h*n+m]^d[k*n+m]);i>l&&(i=l,j=k)}g[h]={index1:h,index2:j,keypoint1:[a[2*h],a[2*h+1]],keypoint2:[c[2*j],c[2*j+1]],confidence:1-i/this.N}}return g},tracking.Brief.reciprocalMatch=function(a,b,c,d){var e=[];if(0===a.length||0===c.length)return e;for(var f=tracking.Brief.match(a,b,c,d),g=tracking.Brief.match(c,d,a,b),h=0;h<f.length;h++)g[f[h].index2].index2===h&&e.push(f[h]);return e},tracking.Brief.getRandomOffsets_=function(a){if(!this.randomWindowOffsets_){for(var b=0,c=new Int32Array(4*this.N),d=0;d<this.N;d++)c[b++]=Math.round(tracking.Math.uniformRandom(-15,16)),c[b++]=Math.round(tracking.Math.uniformRandom(-15,16)),c[b++]=Math.round(tracking.Math.uniformRandom(-15,16)),c[b++]=Math.round(tracking.Math.uniformRandom(-15,16));this.randomWindowOffsets_=c}if(!this.randomImageOffsets_[a]){for(var e=0,f=new Int32Array(2*this.N),g=0;g<this.N;g++)f[e++]=this.randomWindowOffsets_[4*g]*a+this.randomWindowOffsets_[4*g+1],f[e++]=this.randomWindowOffsets_[4*g+2]*a+this.randomWindowOffsets_[4*g+3];this.randomImageOffsets_[a]=f}return this.randomImageOffsets_[a]}}(),function(){tracking.Fast={},tracking.Fast.THRESHOLD=40,tracking.Fast.circles_={},tracking.Fast.findCorners=function(a,b,c,d){var e=this.getCircleOffsets_(b),f=new Int32Array(16),g=[];void 0===d&&(d=this.THRESHOLD);for(var h=3;c-3>h;h++)for(var i=3;b-3>i;i++){for(var j=h*b+i,k=a[j],l=0;16>l;l++)f[l]=a[j+e[l]];this.isCorner(k,f,d)&&(g.push(i,h),i+=3)}return g},tracking.Fast.isBrighter=function(a,b,c){return a-b>c},tracking.Fast.isCorner=function(a,b,c){if(this.isTriviallyExcluded(b,a,c))return!1;for(var d=0;16>d;d++){for(var e=!0,f=!0,g=0;9>g;g++){var h=b[d+g&15];if(!this.isBrighter(a,h,c)&&(f=!1,e===!1))break;if(!this.isDarker(a,h,c)&&(e=!1,f===!1))break}if(f||e)return!0}return!1},tracking.Fast.isDarker=function(a,b,c){return b-a>c},tracking.Fast.isTriviallyExcluded=function(a,b,c){var d=0,e=a[8],f=a[12],g=a[4],h=a[0];return this.isBrighter(h,b,c)&&d++,this.isBrighter(g,b,c)&&d++,this.isBrighter(e,b,c)&&d++,this.isBrighter(f,b,c)&&d++,3>d&&(d=0,this.isDarker(h,b,c)&&d++,this.isDarker(g,b,c)&&d++,this.isDarker(e,b,c)&&d++,this.isDarker(f,b,c)&&d++,3>d)?!0:!1},tracking.Fast.getCircleOffsets_=function(a){if(this.circles_[a])return this.circles_[a];var b=new Int32Array(16);return b[0]=-a-a-a,b[1]=b[0]+1,b[2]=b[1]+a+1,b[3]=b[2]+a+1,b[4]=b[3]+a,b[5]=b[4]+a,b[6]=b[5]+a-1,b[7]=b[6]+a-1,b[8]=b[7]-1,b[9]=b[8]-1,b[10]=b[9]-a-1,b[11]=b[10]-a-1,b[12]=b[11]-a,b[13]=b[12]-a,b[14]=b[13]-a+1,b[15]=b[14]-a+1,this.circles_[a]=b,b}}(),function(){tracking.Math={},tracking.Math.distance=function(a,b,c,d){var e=c-a,f=d-b;return Math.sqrt(e*e+f*f)},tracking.Math.hammingWeight=function(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),16843009*(a+(a>>4)&252645135)>>24},tracking.Math.uniformRandom=function(a,b){return a+Math.random()*(b-a)},tracking.Math.intersectRect=function(a,b,c,d,e,f,g,h){return!(e>c||a>g||f>d||b>h)}}(),function(){tracking.Matrix={},tracking.Matrix.forEach=function(a,b,c,d,e){e=e||1;for(var f=0;c>f;f+=e)for(var g=0;b>g;g+=e){var h=f*b*4+4*g;d.call(this,a[h],a[h+1],a[h+2],a[h+3],h,f,g)}}}(),function(){tracking.EPnP={},tracking.EPnP.solve=function(a,b,c){}}(),function(){tracking.Tracker=function(){tracking.Tracker.base(this,"constructor")},tracking.inherits(tracking.Tracker,tracking.EventEmitter),tracking.Tracker.prototype.track=function(){}}(),function(){tracking.TrackerTask=function(a){if(tracking.TrackerTask.base(this,"constructor"),!a)throw new Error("Tracker instance not specified.");this.setTracker(a)},tracking.inherits(tracking.TrackerTask,tracking.EventEmitter),tracking.TrackerTask.prototype.tracker_=null,tracking.TrackerTask.prototype.running_=!1,tracking.TrackerTask.prototype.getTracker=function(){return this.tracker_},tracking.TrackerTask.prototype.inRunning=function(){return this.running_},tracking.TrackerTask.prototype.setRunning=function(a){this.running_=a},tracking.TrackerTask.prototype.setTracker=function(a){this.tracker_=a},tracking.TrackerTask.prototype.run=function(){var a=this;return this.inRunning()?void 0:(this.setRunning(!0),this.reemitTrackEvent_=function(b){a.emit("track",b)},this.tracker_.on("track",this.reemitTrackEvent_),this.emit("run"),this)},tracking.TrackerTask.prototype.stop=function(){return this.inRunning()?(this.setRunning(!1),this.emit("stop"),this.tracker_.removeListener("track",this.reemitTrackEvent_),this):void 0}}(),function(){tracking.ColorTracker=function(a){tracking.ColorTracker.base(this,"constructor"),"string"==typeof a&&(a=[a]),a&&(a.forEach(function(a){if(!tracking.ColorTracker.getColor(a))throw new Error('Color not valid, try `new tracking.ColorTracker("magenta")`.')}),this.setColors(a))},tracking.inherits(tracking.ColorTracker,tracking.Tracker),tracking.ColorTracker.knownColors_={},tracking.ColorTracker.neighbours_={},tracking.ColorTracker.registerColor=function(a,b){tracking.ColorTracker.knownColors_[a]=b},tracking.ColorTracker.getColor=function(a){return tracking.ColorTracker.knownColors_[a]},tracking.ColorTracker.prototype.colors=["magenta"],tracking.ColorTracker.prototype.minDimension=20,tracking.ColorTracker.prototype.maxDimension=1/0,tracking.ColorTracker.prototype.minGroupSize=30,tracking.ColorTracker.prototype.calculateDimensions_=function(a,b){for(var c=-1,d=-1,e=1/0,f=1/0,g=0;b>g;g+=2){var h=a[g],i=a[g+1];e>h&&(e=h),h>c&&(c=h),f>i&&(f=i),i>d&&(d=i)}return{width:c-e,height:d-f,x:e,y:f}},tracking.ColorTracker.prototype.getColors=function(){return this.colors},tracking.ColorTracker.prototype.getMinDimension=function(){return this.minDimension},tracking.ColorTracker.prototype.getMaxDimension=function(){return this.maxDimension},tracking.ColorTracker.prototype.getMinGroupSize=function(){return this.minGroupSize},tracking.ColorTracker.prototype.getNeighboursForWidth_=function(a){if(tracking.ColorTracker.neighbours_[a])return tracking.ColorTracker.neighbours_[a];var b=new Int32Array(8);return b[0]=4*-a,b[1]=4*-a+4,b[2]=4,b[3]=4*a+4,b[4]=4*a,b[5]=4*a-4,b[6]=-4,b[7]=4*-a-4,tracking.ColorTracker.neighbours_[a]=b,b},tracking.ColorTracker.prototype.mergeRectangles_=function(a){for(var b,c=[],d=this.getMinDimension(),e=this.getMaxDimension(),f=0;f<a.length;f++){var g=a[f];b=!0;for(var h=f+1;h<a.length;h++){var i=a[h];if(tracking.Math.intersectRect(g.x,g.y,g.x+g.width,g.y+g.height,i.x,i.y,i.x+i.width,i.y+i.height)){b=!1;var j=Math.min(g.x,i.x),k=Math.min(g.y,i.y),l=Math.max(g.x+g.width,i.x+i.width),m=Math.max(g.y+g.height,i.y+i.height);i.height=m-k,i.width=l-j,i.x=j,i.y=k;break}}b&&g.width>=d&&g.height>=d&&g.width<=e&&g.height<=e&&c.push(g)}return c},tracking.ColorTracker.prototype.setColors=function(a){this.colors=a},tracking.ColorTracker.prototype.setMinDimension=function(a){this.minDimension=a},tracking.ColorTracker.prototype.setMaxDimension=function(a){this.maxDimension=a},tracking.ColorTracker.prototype.setMinGroupSize=function(a){this.minGroupSize=a},tracking.ColorTracker.prototype.track=function(a,b,c){var d=this,e=this.getColors();if(!e)throw new Error('Colors not specified, try `new tracking.ColorTracker("magenta")`.');var f=[];e.forEach(function(e){f=f.concat(d.trackColor_(a,b,c,e))}),this.emit("track",{data:f})},tracking.ColorTracker.prototype.trackColor_=function(c,d,e,f){var g,h,i,j,k,l=tracking.ColorTracker.knownColors_[f],m=new Int32Array(c.length>>2),n=new Int8Array(c.length),o=this.getMinGroupSize(),p=this.getNeighboursForWidth_(d),q=new Int32Array(c.length),r=[],s=-4;if(!l)return r;for(var t=0;e>t;t++)for(var u=0;d>u;u++)if(s+=4,!n[s]){for(g=0,k=-1,q[++k]=s,q[++k]=t,q[++k]=u,n[s]=1;k>=0;)if(i=q[k--],h=q[k--],j=q[k--],l(c[j],c[j+1],c[j+2],c[j+3],j,h,i)){m[g++]=i,m[g++]=h;for(var v=0;v<p.length;v++){var w=j+p[v],x=h+a[v],y=i+b[v];!n[w]&&x>=0&&e>x&&y>=0&&d>y&&(q[++k]=w,q[++k]=x,q[++k]=y,n[w]=1)}}if(g>=o){var z=this.calculateDimensions_(m,g);z&&(z.color=f,r.push(z))}}return this.mergeRectangles_(r)},tracking.ColorTracker.registerColor("cyan",function(a,b,c){var d=50,e=70,f=a-0,g=b-255,h=c-255;return b-a>=d&&c-a>=e?!0:6400>f*f+g*g+h*h}),tracking.ColorTracker.registerColor("magenta",function(a,b,c){var d=50,e=a-255,f=b-0,g=c-255;return a-b>=d&&c-b>=d?!0:19600>e*e+f*f+g*g}),tracking.ColorTracker.registerColor("yellow",function(a,b,c){var d=50,e=a-255,f=b-255,g=c-0;return a-c>=d&&b-c>=d?!0:1e4>e*e+f*f+g*g});var a=new Int32Array([-1,-1,0,1,1,1,0,-1]),b=new Int32Array([0,1,1,1,0,-1,-1,-1])}(),function(){tracking.ObjectTracker=function(a){tracking.ObjectTracker.base(this,"constructor"),a&&(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.forEach(function(b,c){if("string"==typeof b&&(a[c]=tracking.ViolaJones.classifiers[b]),!a[c])throw new Error('Object classifier not valid, try `new tracking.ObjectTracker("face")`.')})),this.setClassifiers(a)},tracking.inherits(tracking.ObjectTracker,tracking.Tracker),tracking.ObjectTracker.prototype.edgesDensity=.2,tracking.ObjectTracker.prototype.initialScale=1,tracking.ObjectTracker.prototype.scaleFactor=1.25,tracking.ObjectTracker.prototype.stepSize=1.5,tracking.ObjectTracker.prototype.getClassifiers=function(){return this.classifiers},tracking.ObjectTracker.prototype.getEdgesDensity=function(){return this.edgesDensity},tracking.ObjectTracker.prototype.getInitialScale=function(){return this.initialScale},tracking.ObjectTracker.prototype.getScaleFactor=function(){return this.scaleFactor},tracking.ObjectTracker.prototype.getStepSize=function(){return this.stepSize},tracking.ObjectTracker.prototype.track=function(a,b,c){var d=this,e=this.getClassifiers();if(!e)throw new Error('Object classifier not specified, try `new tracking.ObjectTracker("face")`.');var f=[];e.forEach(function(e){f=f.concat(tracking.ViolaJones.detect(a,b,c,d.getInitialScale(),d.getScaleFactor(),d.getStepSize(),d.getEdgesDensity(),e))}),this.emit("track",{data:f})},tracking.ObjectTracker.prototype.setClassifiers=function(a){this.classifiers=a},tracking.ObjectTracker.prototype.setEdgesDensity=function(a){this.edgesDensity=a},tracking.ObjectTracker.prototype.setInitialScale=function(a){this.initialScale=a},tracking.ObjectTracker.prototype.setScaleFactor=function(a){this.scaleFactor=a},tracking.ObjectTracker.prototype.setStepSize=function(a){this.stepSize=a}}();